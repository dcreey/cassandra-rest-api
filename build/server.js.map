{"version":3,"sources":["webpack:///webpack/bootstrap 587a0a2dc4b0446b7ec8","webpack:///./src/server.js","webpack:///external \"path\"","webpack:///external \"winston-daily-rotate-file\"","webpack:///./src/data/dataAccess.js","webpack:///./src/data/models/contact.js","webpack:///./src/middleware/logger.js","webpack:///./src/routes/v1/contact/contactCtrl.js","webpack:///./src/routes/v1/contact/index.js","webpack:///\\.spec).)*(.js)$","webpack:///./src/routes index*\\.(js$)[^.]*$","webpack:///external \"bluebird\"","webpack:///external \"cassandra-driver\"","webpack:///external \"express\"","webpack:///external \"express-winston\"","webpack:///external \"fs\"","webpack:///external \"winston\""],"names":["port","process","env","PORT","routeArray","versions","routes","req","keys","forEach","key","version","split","posix","sep","push","console","log","app","use","routeLogger","router","Router","get","res","next","Error","route","errorLogger","listen","message","settings","path","require","client","Client","contactPoints","keyspace","dataAccess","cassandraClient","modelName","basename","model","types","getAllQuery","getQuery","updateQuery","deleteQuery","createQuery","Contact","id","firstName","lastName","email","phoneNumber","parsePhoneNumber","number","num","trim","replace","parseInt","buildPropertyList","c1","c2","values","undefined","module","exports","dataTypes","Promise","getNewContact","getAll","rej","execute","err","result","info","rows","length","getById","updateById","contact","contactInDb","fieldsToUpdate","e","deleteById","create","contactToInsert","timeuuid","fieldsToPush","query","fs","logDir","logLevel","existsSync","mkdirSync","tsFormat","Date","toLocaleTimeString","logger","transports","Console","json","colorize","filename","timestamp","datePattern","prepend","level","meta","msg","expressFormat","sendResponse","response","sendNullResponse","status","error","sendConflictResponse","errorHandler","contactCtrl","then","contacts","catch","createContact","params","contact_id","body","createdContact","getContact","updateContact","updatedContact","deleteContact","contactController","post","put","delete"],"mappings":"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","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 587a0a2dc4b0446b7ec8\n **/","/**\n * Created by dcreey on 8/30/2016.\n */\nimport express from 'express';\nimport path from 'path';\nimport dataAccess from './data/dataAccess';\nimport logger from './middleware/logger';\n\nconst port = process.env.PORT || '3000';\nconst routeArray = { versions: [], routes: {} };\n\nconst req = require.context('./routes', true, /index*\\.(js$)[^.]*$/);\nreq.keys().forEach((key) => {\n  const version = key.split(path.posix.sep)[1];\n  if (routeArray.routes[version]) {\n    routeArray.routes[version].push(req(key));\n  } else {\n    routeArray.versions.push(version);\n    routeArray.routes[version] = [req(key)];\n  }\n  console.log(`API Version ${version} Registered`);\n});\n\n// create express app\nconst app = express();\n\n// register request logger\napp.use(logger.routeLogger);\n\n// register all api routes\nrouteArray.versions.forEach((version) => {\n  const router = new express.Router();\n  router.get('/error', (req, res, next) =>\n    // here we cause an error in the pipeline so we see express-winston in action.\n    next(new Error('This is an error and it should be logged to the console'))\n  );\n  routeArray.routes[version].forEach((route) => {\n    route(router, dataAccess);\n  });\n  app.use(`/${version}`, router);\n});\n\n// register error logger\napp.use(logger.errorLogger);\n\napp.listen(port, () => {\n  const message = `express-winston demo listening on port = ${port}\n                   in ${app.settings.env} mode`;\n  console.log(message);\n});\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/server.js\n **/","module.exports = require(\"path\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"path\"\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = require(\"winston-daily-rotate-file\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"winston-daily-rotate-file\"\n ** module id = 2\n ** module chunks = 0\n **/","/**\n * Created by dcreey on 8/29/2016.\n */\n\nimport Promise from 'bluebird';\nimport cassandra from 'cassandra-driver';\n\nconst path = require('path');\n// const fs = require('fs');\n\nconst client = new cassandra.Client({ contactPoints: ['127.0.0.1'], keyspace: 'testkeyspace' });\n\n// build database access object\nconst dataAccess = { cassandraClient: client };\n\nconst req = require.context('./models', true, /^((?!\\.spec).)*(.js)$/);\nreq.keys().forEach((key) => {\n  const modelName = path.basename(key, '.js');\n  const model = req(key);\n  dataAccess[modelName] = model(client, cassandra.types, Promise);\n});\n\n// fs\n//    .readdirSync(Path.join(__dirname, 'models'))\n//    .filter((file) => (file.indexOf('.') !== 0) && (file.indexOf('spec') === -1))\n//    .forEach((file) => {\n//      const modelPath = Path.join(__dirname, 'models', file);\n//      const model = require(modelPath); // eslint-disable-line global-require\n//      db[file.replace('.js', '')] = model(client, cassandra.types, Promise);\n//    });\n\nexport default dataAccess;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/data/dataAccess.js\n **/","/**\n * Created by dcreey on 8/29/2016.\n */\n\nconst getAllQuery = 'SELECT * FROM contact';\nconst getQuery = 'SELECT * FROM contact WHERE id=?';\nconst updateQuery = 'UPDATE contact SET {0} WHERE id=?';\nconst deleteQuery = 'DELETE FROM contact WHERE id=?';\nconst createQuery = 'INSERT INTO contact ({0}) VALUES ({1})';\n\nfunction Contact() {\n  return {\n    id: '',\n    firstName: '',\n    lastName: '',\n    email: '',\n    phoneNumber: '',\n  };\n}\nfunction parsePhoneNumber(number) {\n  const num = number.trim()\n    .replace(' ', '')\n    .replace('-', '')\n    .replace('(', '')\n    .replace(')', '');\n  return parseInt(num, 10);\n}\n\nfunction buildPropertyList(c1, c2, id) {\n  const values = [];\n  values.push(c1.firstName === undefined ? c2.firstName : c1.firstName.trim());\n  values.push(c1.lastName === undefined ? c2.lastName : c1.lastName.trim());\n  values.push(c1.email === undefined ? c2.email : c1.email.trim());\n  values.push(c1.phoneNumber === undefined ? c2.phoneNumber : parsePhoneNumber(c1.phoneNumber));\n  values.push(id);\n  return values;\n}\n\nmodule.exports = function (client, dataTypes, Promise) {\n  return {\n    getNewContact() { return new Contact(); },\n    getAll() {\n      return new Promise((res, rej) => {\n        client.execute(getAllQuery, [], (err, result) => {\n          if (err) {\n            rej(err);\n          } else {\n            console.info(`Returning ${result.rows.length} contacts`);\n            res(result);\n          }\n        });\n      });\n    },\n    getById(id) {\n      return new Promise((res, rej) => {\n        client.execute(getQuery, [id], (err, result) => {\n          if (err) {\n            rej(err);\n          } else if (result.rows.length === 0) {\n            res(null);\n          } else {\n            console.log(`got contact with id ${result.rows[0].id}`);\n            res(result.rows[0]);\n          }\n        });\n      });\n    },\n\n    updateById(id, contact) {\n      return new Promise((res, rej) => {\n        client.execute(getQuery, [id], (err, contactInDb) => {\n          if (err) {\n            rej(err);\n          } else {\n            const values = buildPropertyList(contact, contactInDb, id);\n            const fieldsToUpdate = 'first_name=?,last_name=?,email=?,phone=?';\n            client.execute(updateQuery.replace('{0}', fieldsToUpdate), values, (e, result) => {\n              if (e) {\n                rej(e);\n              } else {\n                res(result);\n              }\n            });\n          }\n        });\n      });\n    },\n\n    deleteById(id) {\n      return new Promise((res, rej) => {\n        client.execute(deleteQuery, [id], (err, result) => {\n          if (err) {\n            rej(err);\n          } else {\n            console.log(`Deleted contact with id ${id}`);\n            res(result);\n          }\n        });\n      });\n    },\n\n    create(contact) {\n      const contactToInsert = contact;\n      contactToInsert.id = dataTypes.timeuuid();\n      return new Promise((res, rej) => {\n        const fieldsToPush = 'id,first_name,last_name,email,phone';\n        const query = createQuery.replace('{0}', fieldsToPush).replace('{1}', '?,?,?,?,?');\n        const values = buildPropertyList(contactToInsert, new Contact(), contactToInsert.id);\n        client.execute(query, values, (err) => {\n          if (err) {\n            rej(err);\n          } else {\n            console.log(`Inserted contact with id ${contact.id}`);\n            res(contact);\n          }\n        });\n      });\n    },\n  };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/data/models/contact.js\n **/","/**\n * Created by dcreey on 9/24/2016.\n */\nimport winston from 'winston';\nimport expressWinston from 'express-winston';\n\nconst fs = require('fs');\n\nconst env = process.env.NODE_ENV || 'development';\nconst logDir = 'log';\nconst logLevel = env === 'development' ? 'verbose' : 'info';\n\n//winston.emitErrs = true;\n\n// Create the log directory if it does not exist\nif (!fs.existsSync(logDir)) {\n  fs.mkdirSync(logDir);\n}\n\nconst tsFormat = () => (new Date()).toLocaleTimeString();\n\n//const logger = new (winston.Logger)({\n//  transports: [\n//    // colorize the output to the console\n//    new (winston.transports.Console)({\n//      timestamp: tsFormat,\n//      colorize: true,\n//      level: logLevel,\n//    }),\n//    new (require('winston-daily-rotate-file'))({ // eslint-disable-line global-require\n//      filename: `${logDir}/-results.log`,\n//      timestamp: tsFormat,\n//      datePattern: 'yyyy-MM-dd',\n//      prepend: true,\n//      level: logLevel,\n//    }),\n//  ],\n//});\n//\n//logger.debug('Debugging info');\n//logger.verbose('Verbose info');\n//logger.info('Hello world');\n//logger.warn('Warning message');\n//logger.error('Error info');\n//\n//module.exports = logger;\n//module.exports.stream = {\n//  write(message, encoding) {\n//    logger.info(message);\n//  },\n//};\n\nconst logger = {};\n\nlogger.routeLogger = expressWinston.logger({\n  transports: [\n    new winston.transports.Console({\n      json: true,\n      colorize: true,\n    }),\n    new (require('winston-daily-rotate-file'))({ // eslint-disable-line global-require\n      filename: `${logDir}/-results.log`,\n      timestamp: tsFormat,\n      datePattern: 'yyyy-MM-dd',\n      prepend: true,\n      level: logLevel,\n    }),\n  ],\n  meta: true, // control whether you want to log the meta data about the request\n  msg: 'HTTP {{res.statusCode}} {{req.method}} {{req.url}}', // {{res.responseTime}}ms\n  expressFormat: true, // Use the default Express/morgan request formatting.\n  colorize: true,\n // ignoreRoute(req, res) { return false; },\n})\n\nlogger.errorLogger = expressWinston.errorLogger({\n  transports: [\n    new winston.transports.Console({\n      json: true,\n      colorize: true,\n    }),\n    new (require('winston-daily-rotate-file'))({ // eslint-disable-line global-require\n      filename: `${logDir}/-results.log`,\n      timestamp: tsFormat,\n      datePattern: 'yyyy-MM-dd',\n      prepend: true,\n      level: logLevel,\n    }),\n  ],\n})\n\nexport default logger;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/middleware/logger.js\n **/","/**\n * Created by dcreey on 8/31/2016.\n * Business Logic Layer for Contact\n */\n\nfunction sendResponse(res, response) {\n  res.json(response);\n}\nfunction sendNullResponse(res, err) {\n  res.status(404).json({ error: err });\n}\nfunction sendConflictResponse(res, err) {\n  res.status(409).json({ error: err });\n}\nfunction errorHandler(next, err) {\n  next(err);\n}\n\nmodule.exports = function contactCtrl(dataAccess) {\n  return {\n    getAll(req, res, next) {\n      dataAccess.contact.getAll().then((contacts) => {\n        if (contacts.length === 0) {\n          sendNullResponse(res, 'No contacts matching parameters');\n        } else {\n          sendResponse(res, contacts);\n        }\n      }).catch((e) => { errorHandler(next, e); });\n    },\n    createContact(req, res, next) {\n      dataAccess.contact.getById(req.params.contact_id).then((contact) => {\n        if (contact) {\n          sendConflictResponse(res, 'Contact already exists');\n        } else {\n          dataAccess.contact.create(req.body).then((createdContact) => {\n            sendResponse(res, createdContact);\n          });\n        }\n      }).catch((e) => { errorHandler(next, e); });\n    },\n    getContact(req, res, next) {\n      dataAccess.contact.getById(req.params.contact_id).then((contact) => {\n        if (!contact) {\n          sendNullResponse(res, 'Contact does not exist');\n        } else {\n          sendResponse(res, contact);\n        }\n      }).catch((e) => { errorHandler(next, e); });\n    },\n    updateContact(req, res, next) {\n      dataAccess.contact.getById(req.params.contact_id).then((contact) => {\n        if (!contact) {\n          sendNullResponse(res, 'Contact does not exist');\n        } else {\n          dataAccess.contact.updateById(contact.id, contact).then((updatedContact) => {\n            sendResponse(res, updatedContact);\n          });\n        }\n      }).catch((e) => { errorHandler(next, e); });\n    },\n\n    deleteContact(req, res, next) {\n      dataAccess.contact.getById(req.params.contact_id).then((contact) => {\n        if (!contact) {\n          sendNullResponse(res, 'Contact does not exist');\n        } else {\n          dataAccess.contact.deleteById(req.contact.id).then(() => {\n            sendResponse(res, { message: 'success' });\n          });\n        }\n      }).catch((e) => { errorHandler(next, e); });\n    },\n\n  };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/routes/v1/contact/contactCtrl.js\n **/","/**\n * Created by dcreey on 8/29/2016.\n * Routing for Contacts\n */\nimport contactCtrl from './contactCtrl';\n\nfunction routes(router, dataAccess) {\n  const contactController = contactCtrl(dataAccess);\n\n  router.route('/contacts')\n    .get(contactController.getAll)\n    .post(contactController.createContact);\n\n  router.route('/contacts/:contact_id')\n    .get(contactController.getContact)\n    .put(contactController.updateContact)\n    .delete(contactController.deleteContact);\n}\n\nmodule.exports = routes;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/routes/v1/contact/index.js\n **/","var map = {\n\t\"./contact.js\": 4\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\treturn map[req] || (function() { throw new Error(\"Cannot find module '\" + req + \"'.\") }());\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 8;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/data/models ^((?!\\.spec).)*(.js)$\n ** module id = 8\n ** module chunks = 0\n **/","var map = {\n\t\"./v1/contact/index.js\": 7\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\treturn map[req] || (function() { throw new Error(\"Cannot find module '\" + req + \"'.\") }());\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 9;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/routes index*\\.(js$)[^.]*$\n ** module id = 9\n ** module chunks = 0\n **/","module.exports = require(\"bluebird\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"bluebird\"\n ** module id = 10\n ** module chunks = 0\n **/","module.exports = require(\"cassandra-driver\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"cassandra-driver\"\n ** module id = 11\n ** module chunks = 0\n **/","module.exports = require(\"express\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"express\"\n ** module id = 12\n ** module chunks = 0\n **/","module.exports = require(\"express-winston\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"express-winston\"\n ** module id = 13\n ** module chunks = 0\n **/","module.exports = require(\"fs\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"fs\"\n ** module id = 14\n ** module chunks = 0\n **/","module.exports = require(\"winston\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"winston\"\n ** module id = 15\n ** module chunks = 0\n **/"],"sourceRoot":""}